{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bacha\\\\OneDrive\\\\Desktop\\\\TrafficAppWebsite-main\\\\src\\\\Components\\\\ProfileDashboard\\\\PayChallan.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport API_URL from '../../config';\nimport { Layout, Card, Form, Input, Button } from 'antd';\nimport 'antd/dist/antd.css';\nimport { Modal } from 'antd';\nimport Sidebarss from './Sidebarss';\nimport { CBadge } from '@coreui/react';\nimport StripeCheckout from \"react-stripe-checkout\";\nimport Loader from \"react-loader-spinner\";\nimport Manubar from './Manubar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Footer,\n  Content\n} = Layout;\n\nconst ApplyForLicense = () => {\n  _s();\n\n  const [Vehicle, setVehicle] = useState('');\n  const [Data, setData] = useState([]);\n  const [spinnerLoading, setSpinnerLoading] = useState(false);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [userid, setUserid] = useState('');\n  const queryParams = new URLSearchParams(window.location.search);\n  const paymentId = queryParams.get('paymentId');\n  const PayerID = queryParams.get('PayerID');\n\n  const _id = queryParams.get('_id');\n\n  console.log(paymentId, PayerID, _id);\n\n  const onFinish = values => {\n    if (!Vehicle) {\n      alert('Please Enter Cnic');\n      return;\n    }\n\n    setSpinnerLoading(true);\n    axios.post(API_URL + '/wardan/webchallanlist', {\n      RegNoOfVehicle: Vehicle\n    }).then(res => {\n      setSpinnerLoading(false);\n      console.log(res);\n\n      if (res.data.message) {\n        alert(res.data.message);\n        return;\n      }\n\n      setData(res.data);\n    }).catch(err => console.log(err));\n    console.log('Success:', values);\n  };\n\n  React.useEffect(() => {\n    const userdata = JSON.parse(localStorage.getItem('UserData'));\n    console.log(userdata);\n    setUserid(userdata._id);\n\n    if (paymentId !== null) {\n      axios.post(API_URL + '/wardan/updateStatus', {\n        UserId: _id,\n        Status: \"Paid\"\n      });\n    }\n  }, [paymentId, PayerID, _id]);\n\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const handleOk = () => {\n    setIsModalVisible(false);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  const getBadge = status => {\n    switch (status) {\n      case 'Paid':\n        return 'success';\n\n      case 'Pending':\n        return 'danger';\n\n      default:\n        return 'primary';\n    }\n  };\n\n  const data = Data.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n      children: item.ChallanTime\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: item.WardanName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: item.OffenderCnic\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: item.RegNoOfVehicle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: item.OffenderName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: item.Fine\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: /*#__PURE__*/_jsxDEV(CBadge, {\n          color: getBadge(item.Status),\n          children: item.Status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: item.Status === 'Paid' ? null : /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: showModal,\n        children: \"Pay Now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)]\n  }, index, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 7\n  }, this));\n\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n\n  async function handleToken(token) {\n    const response = await axios.post(API_URL + \"/stripe/webpay\", {\n      token,\n      Data,\n      userid\n    });\n    console.log(token);\n    const {\n      status\n    } = response.data;\n    console.log(\"Response:\", response.data);\n\n    if (status === \"success\") {\n      setIsModalVisible(false);\n      alert(\"Success! Check email for details\");\n      await axios.post(API_URL + '/wardan/updateStatus', {\n        UserId: Data[0]._id,\n        Status: \"Paid\"\n      });\n    } else {\n      alert(\"Something went wrong\");\n    }\n  }\n\n  const PayWithPayPal = () => {\n    setIsModalVisible(false);\n    setSpinnerLoading(true);\n    axios.post(API_URL + '/web/paypal', {\n      Data\n    }).then(response => {\n      console.log(response.data);\n      setSpinnerLoading(false);\n      window.location.href = `${response.data}`;\n    }).catch(error => console.log(error));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Layout, {\n      children: [/*#__PURE__*/_jsxDEV(Manubar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(Layout, {\n        children: [/*#__PURE__*/_jsxDEV(Sidebarss, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(Layout, {\n          children: [/*#__PURE__*/_jsxDEV(Content, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '20px',\n                background: '#ececec ',\n                width: 1250,\n                height: '650px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                title: \"Pay Online Challan \",\n                bordered: false,\n                style: {\n                  height: '600px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Form, {\n                  name: \"basic\",\n                  labelCol: {\n                    span: 4\n                  },\n                  wrapperCol: {\n                    span: 8\n                  },\n                  initialValues: {\n                    remember: true\n                  },\n                  onFinish: onFinish,\n                  onFinishFailed: onFinishFailed,\n                  children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n                    label: \"Vehicle Number\",\n                    name: \"Vehicle Number\",\n                    rules: [{\n                      required: false,\n                      message: 'Please input your Vehicle Number!'\n                    }],\n                    children: /*#__PURE__*/_jsxDEV(Input, {\n                      onChange: e => setVehicle(e.target.value),\n                      value: Vehicle,\n                      type: \"value\",\n                      placeholder: \"ABC-XXXX\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 229,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                    wrapperCol: {\n                      offset: 4,\n                      span: 8\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      type: \"primary\",\n                      htmlType: \"submit\",\n                      children: \"Submit\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \"table table-hover table-outline mb-0 d-none d-sm-table\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    className: \"thead-light\",\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"ChallanTime\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 246,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Wardan Name\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 247,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"CNIC\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 248,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"RegNoOfVehicle\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 249,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"OffenderName\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 250,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Fine\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 251,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Status\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 252,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Online Payment\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 253,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: data\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(Loader, {\n                  style: {\n                    textAlign: 'center'\n                  },\n                  type: \"Puff\",\n                  color: \"green\",\n                  height: 80,\n                  width: 60,\n                  visible: spinnerLoading\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(Modal, {\n                  title: \"Pay Your Electronic Challan\",\n                  visible: isModalVisible,\n                  onOk: handleOk,\n                  onCancel: handleCancel,\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Stripe\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(StripeCheckout, {\n                    stripeKey: \"pk_test_51HqkVCAXTFLHhrkDO7bPcUn24Cc1ldZqcimfA1xHmUt8RiyYXzIICysRYDmumt0yToUptGyRxRGVpGqPKfVpfyR3000Et4a9pL\",\n                    token: handleToken,\n                    name: \"Stripe\",\n                    currency: \"rupees\",\n                    billingAddress: true,\n                    shippingAddress: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"PayPal\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 287,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    type: \"primary\",\n                    onClick: PayWithPayPal,\n                    children: \"Pay With PayPal\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 288,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Footer, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mfs-auto\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-1\",\n                children: \"Powered by\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \" | Islamabad Traffic Police\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 22\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(ApplyForLicense, \"Ox1hpzj4yOgJFIpkHnt4z3AWd+k=\");\n\n_c = ApplyForLicense;\nexport default ApplyForLicense;\n\nvar _c;\n\n$RefreshReg$(_c, \"ApplyForLicense\");","map":{"version":3,"sources":["C:/Users/bacha/OneDrive/Desktop/TrafficAppWebsite-main/src/Components/ProfileDashboard/PayChallan.js"],"names":["React","useState","axios","API_URL","Layout","Card","Form","Input","Button","Modal","Sidebarss","CBadge","StripeCheckout","Loader","Manubar","Footer","Content","ApplyForLicense","Vehicle","setVehicle","Data","setData","spinnerLoading","setSpinnerLoading","isModalVisible","setIsModalVisible","userid","setUserid","queryParams","URLSearchParams","window","location","search","paymentId","get","PayerID","_id","console","log","onFinish","values","alert","post","RegNoOfVehicle","then","res","data","message","catch","err","useEffect","userdata","JSON","parse","localStorage","getItem","UserId","Status","showModal","handleOk","handleCancel","getBadge","status","map","item","index","ChallanTime","WardanName","OffenderCnic","OffenderName","Fine","onFinishFailed","errorInfo","handleToken","token","response","PayWithPayPal","href","error","padding","background","width","height","span","remember","required","e","target","value","offset","textAlign"],"mappings":"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","sourcesContent":["import React ,{useState}from 'react';\nimport axios from 'axios';\nimport API_URL from '../../config';\nimport { Layout   , Card , Form , Input  , Button } from 'antd';\nimport 'antd/dist/antd.css';\nimport { Modal } from 'antd';\nimport Sidebarss from './Sidebarss';\nimport { CBadge} from '@coreui/react';\nimport StripeCheckout from \"react-stripe-checkout\";\nimport Loader from \"react-loader-spinner\";\nimport Manubar from './Manubar';\n\nconst {   Footer, Content  } = Layout;\n\nconst ApplyForLicense = () => {\n        \n        const [Vehicle, setVehicle] = useState('');  \n        const [Data, setData] = useState([]);\n        const [spinnerLoading, setSpinnerLoading] = useState(false);\n        const [isModalVisible, setIsModalVisible] = useState(false);\n        const [userid, setUserid] = useState('');\n        const queryParams = new URLSearchParams(window.location.search);\n        const paymentId = queryParams.get('paymentId');\n        const PayerID = queryParams.get('PayerID');\n        const _id = queryParams.get('_id');\n     \n        console.log(paymentId, PayerID,_id);\n        const onFinish = (values) => {\n          \n          if(!Vehicle){\n           alert('Please Enter Cnic');\n           return;\n       }\n       setSpinnerLoading(true)\n           axios.post(API_URL+'/wardan/webchallanlist',{\n               RegNoOfVehicle:Vehicle\n           })\n           .then(res=>{\n             setSpinnerLoading(false)\n             console.log(res);\n             if(res.data.message){\n               alert(res.data.message);\n               return;\n             }\n              \n               setData(res.data);\n           })\n           .catch(err=>console.log(err));\n   \n   \n   \n           console.log('Success:', values);\n         };\n\n        React.useEffect(() => {\n          const userdata=JSON.parse(localStorage.getItem('UserData'));\n          console.log(userdata)\n          setUserid(userdata._id)\n       \n        \n        if(paymentId !==null ){\n           axios.post(API_URL+'/wardan/updateStatus',{\n            UserId:_id,\n             Status: \"Paid\" \n          })\n         \n      }\n    }, [paymentId,PayerID,_id]);\n     \n     \n   \n      \n       \n\n        const showModal = () => {\n          setIsModalVisible(true);\n        };\n      \n        const handleOk = () => {\n          setIsModalVisible(false);\n        };\n      \n        const handleCancel = () => {\n          setIsModalVisible(false);\n        };\n    \n\n      const getBadge = status => {\n        switch (status) {\n          case 'Paid': return 'success'\n          case 'Pending': return 'danger'\n          default: return 'primary'\n        }\n      }\n\n   \n    \n\n      const data=  Data.map((item,index)=>\n                \n                       \n      <tr key={index}>\n      <td>\n        {\n          item.ChallanTime\n        }\n      </td>\n      <td>\n          <span>{item.WardanName}</span>\n      </td>\n      <td >\n        <p>{item.OffenderCnic}</p>\n      </td>\n      <td>\n      <div>\n      <strong >{item.RegNoOfVehicle}</strong>\n       </div>\n      </td>\n      <td>\n      <strong>{item.OffenderName}</strong>\n      </td>\n      <td>\n      <strong>{item.Fine}</strong>\n      </td>\n     \n      <td>\n        <strong>\n                    <CBadge color={getBadge(item.Status)}>\n                        {item.Status}\n                      </CBadge>\n      </strong>\n      </td>\n     \n      <td>\n          {\n              item.Status==='Paid'?\n               null\n              :\n              <Button  type=\"primary\" onClick={showModal}>\n              Pay Now\n               </Button>\n          }\n     </td>\n      \n    </tr> \n  ) \n\n\n\n      const onFinishFailed = (errorInfo ) => {\n        console.log('Failed:', errorInfo);\n      };\n\n     \n\n         \n            \n              async function handleToken(token) {\n                const response = await axios.post(\n                   API_URL+\"/stripe/webpay\",\n                  { token ,Data,userid }\n                  \n                );\n               \n                console.log(token)\n            \n                const { status } = response.data;\n                console.log(\"Response:\", response.data);\n                if (status === \"success\") {\n                    setIsModalVisible(false);\n                  alert(\"Success! Check email for details\");\n\n                 await axios.post(API_URL+'/wardan/updateStatus',{\n                    UserId:Data[0]._id,\n                     Status: \"Paid\" \n                  })\n\n                } else {\n                  alert(\"Something went wrong\");\n                }\n              }\n\n             const PayWithPayPal =()=>{\n                 setIsModalVisible(false);\n                 setSpinnerLoading(true)\n                 axios.post(API_URL+'/web/paypal',{\n                   Data\n                 })\n                 .then(response=>{\n                \n                     console.log(response.data)\n                     setSpinnerLoading(false);\n                     window.location.href = `${response.data}`;\n                 })\n                 .catch(error=>console.log(error));\n             } \n                \n    return (\n        <>\n            <Layout >\n           < Manubar/>\n            <Layout> \n                                        <Sidebarss />\n            <Layout>\n                   \n                            \n                           \n                            \n                                <Content>             \n                                    <div style={{padding: '20px' ,  background: '#ececec ' ,width: 1250, height : '650px' }}>\n                                        <Card title=\"Pay Online Challan \" bordered={false} style={{height : '600px'}} >\n \n                                       \n                                           \n                                                <Form\n                                                name=\"basic\"\n                                                labelCol={{ span: 4 }}\n                                                wrapperCol={{ span: 8 }}\n                                                initialValues={{ remember: true }}\n                                                onFinish={onFinish}\n                                                onFinishFailed={onFinishFailed}\n                                                >\n                                            \n                                                <Form.Item\n                                                label=\"Vehicle Number\"\n                                                name=\"Vehicle Number\"\n                                                rules={[{ required: false, message: 'Please input your Vehicle Number!' }]}\n                                            >\n                                                <Input\n                                                 onChange={(e)=>setVehicle(e.target.value)}\n                                                 value={Vehicle}\n                                                type='value'  placeholder='ABC-XXXX' />\n                                            </Form.Item>\n                                                <Form.Item wrapperCol={{ offset: 4, span: 8 }}>\n                                                <Button type=\"primary\" htmlType='submit'>\n                                                Submit\n                                                </Button>\n                                            </Form.Item>\n                                                </Form>\n\n                                            \n                                                \n                                                <table className=\"table table-hover table-outline mb-0 d-none d-sm-table\">\n                                                <thead className=\"thead-light\">\n                                                <tr>\n                                                    <th>ChallanTime</th>\n                                                    <th>Wardan Name</th>\n                                                    <th>CNIC</th>\n                                                    <th>RegNoOfVehicle</th>\n                                                    <th>OffenderName</th>\n                                                    <th>Fine</th>\n                                                    <th>Status</th>\n                                                    <th>Online Payment</th>\n                                \n                                                </tr>\n                                                </thead>\n                                                <tbody>\n                                                { \n                                                data\n                                                }\n                                                </tbody>            \n                                            </table>\n                                               \n                                            <Loader\n                                            style={{textAlign:'center'}}\n                                              type=\"Puff\" \n                                              color=\"green\"\n                                              height={80}\n                                              width={60}\n                                              \n                                              visible={spinnerLoading}\n                                            />\n\n                                            <Modal title=\"Pay Your Electronic Challan\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel}>\n                                                <strong>Stripe</strong>\n                                                <StripeCheckout\n                                                stripeKey=\"pk_test_51HqkVCAXTFLHhrkDO7bPcUn24Cc1ldZqcimfA1xHmUt8RiyYXzIICysRYDmumt0yToUptGyRxRGVpGqPKfVpfyR3000Et4a9pL\"\n                                                token={handleToken}\n                                                name=\"Stripe\"\n                                                currency=\"rupees\"\n                                                billingAddress\n                                                shippingAddress\n                                            />\n                                            <br></br>\n                                            <br></br>\n                                            <br></br>\n                                            <strong>PayPal</strong>\n                                        <Button  type=\"primary\"  onClick={PayWithPayPal}>\n                                         Pay With PayPal\n                                        </Button>\n                                            </Modal>\n                                               \n                                             \n                                        \n                                      \n                                    </Card>\n                                    </div>\n                                </Content>\n                            \n             \n                     <Footer>\n                        <div className=\"mfs-auto\">\n                        <span className=\"mr-1\">Powered by</span>\n                        <span> | Islamabad Traffic Police</span>\n                    </div>\n                    </Footer>\n               \n                \n            </Layout>\n            </Layout>\n            </Layout>\n        </>\n    )\n}\n\nexport default ApplyForLicense"]},"metadata":{},"sourceType":"module"}